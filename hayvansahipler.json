{
  "name": "HayvanSahipleri - AI Forum AsistanÄ± (Tek Workflow)",
  "nodes": [
    {
      "parameters": {},
      "id": "ManualTrigger",
      "name": "ğŸŸ¢ Manuel Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [80, 140]
    },
    {
      "parameters": {
        "rule": {
          "interval": [ { "field": "minutes", "value": 60 } ]
        }
      },
      "id": "Cron",
      "name": "â° Saatlik Cron",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1,
      "position": [80, 320],
      "notes": "Her saat baÅŸÄ± otomatik tarama + oto-cevap / moderasyon akÄ±ÅŸÄ±nÄ± tetikler."
    },
    {
      "parameters": {
        "path": "forum-bot",
        "httpMethod": "POST",
        "responseMode": "lastNode",
        "options": { "responseData": "={{$json}}" }
      },
      "id": "Webhook",
      "name": "ğŸŒ Webhook (Komut GiriÅŸi)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [80, 500],
      "notes": "Discordâ€™dan veya dÄ±ÅŸ sistemden komut gÃ¶ndermek istersen; body: {\"command\":\"getir son konular\"}"
    },
    {
      "parameters": {
        "functionCode": "const now = new Date().toISOString();\n// Kaynak: Manuel / Cron / Webhook\nlet command = '';\nif (items[0].json && items[0].json.command) {\n  command = String(items[0].json.command||'').trim();\n} else {\n  // Manuel/Cron tetiklerinde varsayÄ±lan iÅŸlem: saatlik gÃ¶revler\n  command = 'cron_run';\n}\nreturn [{ now, command }];"
      },
      "id": "EntryNormalize",
      "name": "ğŸ”§ GiriÅŸ Normalize",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [320, 240]
    },
    {
      "parameters": {
        "functionCode": "// KomutlarÄ± tanÄ±: \n// yardim | getir son konular | getir son mesajlar | sil <link> | yeni konu <kategori>|<baÅŸlÄ±k>|<prompt> | cron_run\nconst input = String($json.command||'').toLowerCase();\nlet action = 'unknown';\nlet payload = {};\n\nif (input === 'yardim' || input === 'yardÄ±m') { action = 'help'; }\nelse if (input.startsWith('getir son konular')) { action = 'fetch_latest_threads'; }\nelse if (input.startsWith('getir son mesajlar')) { action = 'fetch_latest_posts'; }\nelse if (input.startsWith('sil ')) { action = 'delete_by_link'; payload.link = input.split(' ').slice(1).join(' ').trim(); }\nelse if (input.startsWith('yeni konu')) {\n  action = 'create_thread_ai';\n  const raw = input.replace(/^yeni konu\\s*/,'');\n  const parts = raw.split('|');\n  payload.kategori = (parts[0]||'').trim();\n  payload.baslik = (parts[1]||'').trim();\n  payload.prompt = (parts[2]||'').trim();\n}\nelse if (input === 'cron_run') { action = 'hourly_job'; }\n\nreturn [{ action, payload }];"
      },
      "id": "ParseCommand",
      "name": "ğŸ§  Komut YorumlayÄ±cÄ±",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [520, 240],
      "notes": "KomutlarÄ±n tamamÄ±nÄ± burada ayrÄ±ÅŸtÄ±rÄ±yoruz."
    },
    {
      "parameters": {
        "rules": {
          "values": [
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "help" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "fetch_latest_threads" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "fetch_latest_posts" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "delete_by_link" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "create_thread_ai" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "hourly_job" }
          ]
        }
      },
      "id": "Router",
      "name": "ğŸš¦ Komut Router",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 2,
      "position": [740, 240]
    },
    {
      "parameters": {
        "functionCode": "const help = `KOMUTLAR:\\nâ€¢ yardim â€” kullanÄ±labilir komutlarÄ± listeler\\nâ€¢ getir son konular â€” son aÃ§Ä±lan konularÄ± getirir\\nâ€¢ getir son mesajlar â€” forumdaki en yeni mesajlarÄ± listeler\\nâ€¢ sil <konu_veya_mesaj_linki> â€” silme onayÄ± ister, onaylanÄ±rsa siler\\nâ€¢ yeni konu <kategori>|<baÅŸlÄ±k>|<prompt> â€” OpenAI ile BBCode iÃ§erik Ã¼retip konu aÃ§ar\\n\\nÃ–rnek: yeni konu kurallar-duyurular|Genel Forum KurallarÄ±|TÃ¼rkiyedeki bÃ¼yÃ¼k forumlardan esinlenerek kapsamlÄ± bir kurallar metni hazÄ±rla.`;\nreturn [{ message: help }];"
      },
      "id": "HelpText",
      "name": "ğŸ“œ YardÄ±m Metni",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [980, 40]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [] },
        "jsonParameters": true,
        "headerParametersUi": {
          "parameter": [ { "name": "Content-Type", "value": "application/json" } ]
        },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordSend",
      "name": "ğŸ”” Discord Bildirim",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1200, 40],
      "notes": "ğŸ”§ DISCORD_WEBHOOK_URL doldur."
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [ { "name": "order", "value": "post_date" }, { "name": "direction", "value": "desc" } ] },
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] }
      },
      "id": "GetLatestThreads",
      "name": "ğŸ§µ XenForo: Son Konular",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 140],
      "notes": "ğŸ”§ XF_API_KEY / BASE_API_URL"
    },
    {
      "parameters": {
        "functionCode": "const threads = items[0].json.threads || items[0].json._default || items[0].json || [];\nconst top = (Array.isArray(threads) ? threads : threads.data || [] ).slice(0,5);\nconst lines = top.map((t,i)=>`${i+1}. ${t.title} â€” ${t.view_url||t.links?.permalink||''}`);\nreturn [{ message: `Son AÃ§Ä±lan Konular:\\n` + lines.join('\\n') }];"
      },
      "id": "FormatThreads",
      "name": "ğŸ§¾ Listele: Konular",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1200, 140]
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [ { "name": "order", "value": "last_post_date" }, { "name": "direction", "value": "desc" } ] },
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] }
      },
      "id": "GetLatestPostsThreads",
      "name": "ğŸ’¬ XenForo: Son Mesajlar (Konu BazlÄ±)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 240],
      "notes": "ğŸ”§ XF_API_KEY / BASE_API_URL â€” son mesajlar iÃ§in en gÃ¼ncel konular"
    },
    {
      "parameters": {
        "functionCode": "const threads = items[0].json.threads || items[0].json._default || items[0].json || [];\nconst top = (Array.isArray(threads) ? threads : threads.data || [] ).slice(0,5);\nconst lines = top.map((t,i)=>`${i+1}. ${t.title} â€” ${t.view_url||t.links?.permalink||''}`);\nreturn [{ message: `Son Mesajlar (gÃ¼ncel konular):\\n` + lines.join('\\n') }];"
      },
      "id": "FormatPostsList",
      "name": "ğŸ§¾ Listele: Mesajlar",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1200, 240]
    },
    {
      "parameters": {
        "functionCode": "function extractIds(link){\n  // Ã–rnek konu: https://.../konu/baslik.6/\n  // Ã–rnek mesaj: https://.../mesaj/12345/\n  const out = { type: 'unknown', id: null };\n  try {\n    const u = new URL(link);\n    const p = u.pathname.toLowerCase();\n    const mThread = p.match(/\\.([0-9]+)\\/?$/);\n    if (p.includes('/konu/') && mThread) {\n      out.type = 'thread'; out.id = mThread[1]; return out;\n    }\n    const mPost = p.match(/\\/mesaj\\/(\\d+)/);\n    if (mPost){ out.type='post'; out.id=mPost[1]; return out;}\n  } catch(e){}\n  return out;\n}\nconst link = $json.payload?.link || '';\nconst info = extractIds(link);\nreturn [{ link, ...info }];"
      },
      "id": "ParseDeleteLink",
      "name": "ğŸ§© Sil: Link/ID AyrÄ±ÅŸtÄ±r",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [980, 340]
    },
    {
      "parameters": {
        "fromEmail": "hayvansahipleri@gmail.com",
        "toEmail": "digiuzman@gmail.com",
        "options": {
          "waitForResponse": {
            "responseFormat": "approval",
            "timeout": 3600
          }
        },
        "subject": "ForumBot - Silme OnayÄ±",
        "text": "Silme talebi: {{$json.type}} ID {{$json.id}} ({{$json.link}})\\nOnaylÄ±yorsanÄ±z Approve, iptal iÃ§in Decline tÄ±klayÄ±n."
      },
      "id": "EmailApprove",
      "name": "âœ‰ï¸ Email Send (Wait for Approval)",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 3,
      "position": [1200, 340],
      "notes": "ğŸ”§ SMTP/IMAP credentials seÃ§; From/To kontrol et"
    },
    {
      "parameters": {
        "conditions": { "boolean": [{ "value1": "={{$json.approval}}"}] }
      },
      "id": "IfApproved",
      "name": "âœ… OnaylandÄ± mÄ±?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [1420, 340]
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/{{$json.type === 'thread' ? 'threads' : 'posts'}}/{{$json.id}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] },
        "ignoreResponse": true
      },
      "id": "DeleteCall",
      "name": "ğŸ—‘ï¸ XenForo DELETE",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1620, 300],
      "notes": "ğŸ”§ XF_API_KEY / BASE_API_URL",
      "credentials": {},
      "webhookId": ""
    },
    {
      "parameters": {
        "functionCode": "return [{ message: `Silme tamamlandÄ±: ${$json.type} ID ${$json.id}` }];"
      },
      "id": "DeleteOkMsg",
      "name": "ğŸ“£ Silme Tamam Bildirimi",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1820, 300]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordAfterDelete",
      "name": "ğŸ”” Discord: Silme Sonucu",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [2020, 300]
    },
    {
      "parameters": {
        "functionCode": "return [{ message: 'Silme iptal edildi.' }];"
      },
      "id": "DeleteCancelled",
      "name": "ğŸš« Silme Ä°ptal",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1620, 400]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordCancelMsg",
      "name": "ğŸ”” Discord: Ä°ptal MesajÄ±",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1820, 400]
    },
    {
      "parameters": {
        "functionCode": "const mapCategory = (k)=>{\n  // Basit eÅŸleme: isim â†’ ID\n  const n = String(k||'').toLowerCase();\n  // Buraya ihtiyaca gÃ¶re gÃ¼ncellenebilir sabit eÅŸleme koyduk\n  if (n.includes('kurallar')) return 2; // Ã¶rnek: Kurallar-Duyurular node_id:2 varsayÄ±m\n  return parseInt(n,10)||2; // sayÄ±ysa direkt, yoksa 2'yi kullan\n};\nreturn [{ node_id: mapCategory($json.payload?.kategori), title: $json.payload?.baslik, prompt: $json.payload?.prompt }];"
      },
      "id": "MapCategory",
      "name": "ğŸ§­ Kategori EÅŸle",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [980, 480],
      "notes": "Kategori adÄ±â†’ID eÅŸleme. Gerekirse burayÄ± dÃ¼zenleyebilirsin."
    },
    {
      "parameters": {
        "resource": "chat",
        "operation": "chatCompletion",
        "model": "gpt-4o",
        "messages": [
          { "role": "system", "content": "TÃ¼rkÃ§e yaz. Forum iÃ§in BBCode ile gÃ¼zel biÃ§imlendirilmiÅŸ, baÅŸlÄ±klar, listeler ve vurgular iÃ§eren bir iÃ§erik Ã¼ret. AbartÄ±lÄ± renklerden kaÃ§Ä±n." },
          { "role": "user", "content": "Konu baÅŸlÄ±ÄŸÄ±: {{$json.title}}\nÄ°Ã§erik yÃ¶nergesi: {{$json.prompt}}\nLÃ¼tfen [B], [U], [LIST], [*] gibi BBCode etiketlerini kullan." }
        ],
        "temperature": 0.6,
        "maxTokens": 1200
      },
      "id": "OpenAI_BBCode",
      "name": "ğŸ§  OpenAI: BBCode Ä°Ã§erik",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 4,
      "position": [1200, 480],
      "notes": "OpenAI credentialâ€™Ä±nÄ± bu nodeâ€™a baÄŸla."
    },
    {
      "parameters": {
        "url": "={{$json.LMSTUDIO_BASE || 'http://localhost:1234/v1'}}/chat/completions",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\n  \"model\": $json.LM_MODEL || \"fikri-8b\",\n  \"messages\": [\n    {\"role\":\"system\",\"content\":\"TÃ¼rkÃ§e imla ve yazÄ±m dÃ¼zeltmeni istiyorum. Sadece dÃ¼zeltilmiÅŸ metni dÃ¶ndÃ¼r.\"},\n    {\"role\":\"user\",\"content\": $json[\"choices\"][0][\"message\"][\"content\"] }\n  ],\n  \"temperature\": 0.2\n}"
      },
      "id": "LM_Proofread",
      "name": "âœï¸ LM Studio: Ä°mla DÃ¼zelt",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1420, 480],
      "notes": "LM Studio aÃ§Ä±kken Ã§alÄ±ÅŸÄ±r. ğŸ”§ LMSTUDIO_BASE / LM_MODEL"
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] },
        "bodyParametersJson": "={\n  \"node_id\": {{$json.node_id}},\n  \"title\": \"{{$json.title}}\",\n  \"message\": {{$json.choices?.[0]?.message?.content || $json.choices?.[0]?.text || $json.result?.choices?.[0]?.message?.content || 'Ä°Ã§erik oluÅŸturulamadÄ±.'}}\n}"
      },
      "id": "CreateThread",
      "name": "ğŸ§µ XenForo: Konu OluÅŸtur",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1640, 480],
      "notes": "ğŸ”§ XF_API_KEY / BASE_API_URL"
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": `ğŸ§µ Yeni konu aÃ§Ä±ldÄ±: ${$json.thread?.view_url || 'URL iÃ§in foruma bakÄ±n'}` }"
      },
      "id": "DiscordNewThread",
      "name": "ğŸ”” Discord: Yeni Konu",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1860, 480]
    },
    {
      "parameters": {
        "functionCode": "const d = new Date();\nconst pad = n=>String(n).padStart(2,'0');\nconst yyyy = d.getFullYear(); const mm = pad(d.getMonth()+1); const dd = pad(d.getDate());\nconst HH = pad(d.getHours()); const MM = pad(d.getMinutes()); const SS = pad(d.getSeconds());\nconst stamp = `${yyyy}-${mm}-${dd} ${HH}:${MM}:${SS}`;\nconst line = `[${stamp}] ${$json.message || 'Olay'}\\n`;\nreturn [{ filename: `C:/Users/Admin/Desktop/Loglar/${yyyy}-${mm}-${dd}.txt`, data: line }];"
      },
      "id": "BuildLogLine",
      "name": "ğŸ§± Log SatÄ±rÄ± HazÄ±rla",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [2080, 140]
    },
    {
      "parameters": {
        "fileName": "={{$json.filename}}",
        "data": "={{$json.data}}",
        "options": { "append": true }
      },
      "id": "WriteLog",
      "name": "ğŸ“ Dosyaya Log Yaz",
      "type": "n8n-nodes-base.writeBinaryFile",
      "typeVersion": 1,
      "position": [2280, 140],
      "notes": "Windowsâ€™ta belirtilen klasÃ¶re .txt olarak log yazar."
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [ { "name": "reply_count", "value": "0" }, { "name": "order", "value": "post_date" }, { "name": "direction", "value": "desc" } ] },
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] }
      },
      "id": "FindUnanswered",
      "name": "ğŸ” YanÄ±tsÄ±z Konular (Saatlik)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 620],
      "notes": "Basit filtre: reply_count=0 (gerekiyorsa logicâ€™te ek koÅŸullar koyarÄ±z)"
    },
    {
      "parameters": {
        "resource": "chat",
        "operation": "chatCompletion",
        "model": "gpt-4o-mini",
        "messages": [
          { "role": "system", "content": "TÃ¼rkÃ§e, kÄ±sa ve yardÄ±mcÄ± bir ilk cevap yaz. Ã‡ok kesin teÅŸhis verme; gerekirse uzmana yÃ¶nlendir. Gerekirse alÄ±ntÄ±layacaÄŸÄ±nÄ± varsay." },
          { "role": "user", "content": "Soru: {{$json.title}} â€” Ä°Ã§erikten Ã¶zet: {{$json.message || '...'}}" }
        ],
        "temperature": 0.5,
        "maxTokens": 500
      },
      "id": "OpenAI_Answer",
      "name": "ğŸ¤– OpenAI: KÄ±sa YanÄ±t",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 4,
      "position": [1200, 620],
      "notes": "Saatlik job: yeni/yanÄ±tsÄ±z sorulara tek seferlik kÄ±sa cevap"
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/posts",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] },
        "bodyParametersJson": "={\n  \"thread_id\": {{$json.thread_id || $json.threads?.[0]?.thread_id}},\n  \"message\": {{$json.choices?.[0]?.message?.content || 'Merhaba!'}}\n}"
      },
      "id": "PostAnswer",
      "name": "âœï¸ XenForo: YanÄ±t GÃ¶nder",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1420, 620],
      "notes": "CevabÄ± ilgili konuya gÃ¶nderir."
    },
    {
      "parameters": {
        "url": "https://api.openai.com/v1/moderations",
        "options": {},
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={ \"model\": \"omni-moderation-latest\", \"input\": $json.message || $json.content || '' }"
      },
      "id": "ModerationCheck",
      "name": "ğŸ›¡ï¸ OpenAI Moderation",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 740],
      "notes": "ZararlÄ± iÃ§erik tespiti (metin) â€” flagged ise yayÄ±nlama/cevap iptal edilebilir."
    },
    {
      "parameters": {
        "functionCode": "const flagged = $json.results?.[0]?.flagged || false;\nreturn [{ flagged, message: flagged ? 'âš ï¸ Moderasyon: Ä°Ã§erik flaglendi' : 'OK' }];"
      },
      "id": "ModerationRoute",
      "name": "ğŸš¦ Moderasyon KararÄ±",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1200, 740]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordModerationAlert",
      "name": "ğŸ”” Discord: Moderasyon UyarÄ±sÄ±",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1420, 740]
    }
  ],
  "connections": {
    "ğŸŸ¢ Manuel Trigger": { "main": [ [ { "node": "ğŸ”§ GiriÅŸ Normalize", "type": "main", "index": 0 } ] ] },
    "â° Saatlik Cron": { "main": [ [ { "node": "ğŸ”§ GiriÅŸ Normalize", "type": "main", "index": 0 } ] ] },
    "ğŸŒ Webhook (Komut GiriÅŸi)": { "main": [ [ { "node": "ğŸ”§ GiriÅŸ Normalize", "type": "main", "index": 0 } ] ] },
    "ğŸ”§ GiriÅŸ Normalize": { "main": [ [ { "node": "ğŸ§  Komut YorumlayÄ±cÄ±", "type": "main", "index": 0 } ] ] },
    "ğŸ§  Komut YorumlayÄ±cÄ±": { "main": [ [ { "node": "ğŸš¦ Komut Router", "type": "main", "index": 0 } ] ] },

    "ğŸš¦ Komut Router": {
      "main": [
        [ { "node": "ğŸ“œ YardÄ±m Metni", "type": "main", "index": 0 } ],
        [ { "node": "ğŸ§µ XenForo: Son Konular", "type": "main", "index": 0 } ],
        [ { "node": "ğŸ’¬ XenForo: Son Mesajlar (Konu BazlÄ±)", "type": "main", "index": 0 } ],
        [ { "node": "ğŸ§© Sil: Link/ID AyrÄ±ÅŸtÄ±r", "type": "main", "index": 0 } ],
        [ { "node": "ğŸ§­ Kategori EÅŸle", "type": "main", "index": 0 } ],
        [ { "node": "ğŸ” YanÄ±tsÄ±z Konular (Saatlik)", "type": "main", "index": 0 } ]
      ]
    },

    "ğŸ“œ YardÄ±m Metni": { "main": [ [ { "node": "ğŸ”” Discord Bildirim", "type": "main", "index": 0 } ] ] },
    "ğŸ§µ XenForo: Son Konular": { "main": [ [ { "node": "ğŸ§¾ Listele: Konular", "type": "main", "index": 0 } ] ] },
    "ğŸ§¾ Listele: Konular": { "main": [ [ { "node": "ğŸ§± Log SatÄ±rÄ± HazÄ±rla", "type": "main", "index": 0 } ] ] },
    "ğŸ’¬ XenForo: Son Mesajlar (Konu BazlÄ±)": { "main": [ [ { "node": "ğŸ§¾ Listele: Mesajlar", "type": "main", "index": 0 } ] ] },
    "ğŸ§¾ Listele: Mesajlar": { "main": [ [ { "node": "ğŸ”” Discord Bildirim", "type": "main", "index": 0 }, { "node": "ğŸ§± Log SatÄ±rÄ± HazÄ±rla", "type": "main", "index": 0 } ] ] },

    "ğŸ§© Sil: Link/ID AyrÄ±ÅŸtÄ±r": { "main": [ [ { "node": "âœ‰ï¸ Email Send (Wait for Approval)", "type": "main", "index": 0 } ] ] },
    "âœ‰ï¸ Email Send (Wait for Approval)": { "main": [ [ { "node": "âœ… OnaylandÄ± mÄ±?", "type": "main", "index": 0 } ] ] },
    "âœ… OnaylandÄ± mÄ±?": {
      "main": [
        [ { "node": "ğŸ—‘ï¸ XenForo DELETE", "type": "main", "index": 0 } ],
        [ { "node": "ğŸš« Silme Ä°ptal", "type": "main", "index": 0 } ]
      ]
    },
    "ğŸ—‘ï¸ XenForo DELETE": { "main": [ [ { "node": "ğŸ“£ Silme Tamam Bildirimi", "type": "main", "index": 0 } ] ] },
    "ğŸ“£ Silme Tamam Bildirimi": { "main": [ [ { "node": "ğŸ”” Discord: Silme Sonucu", "type": "main", "index": 0 }, { "node": "ğŸ§± Log SatÄ±rÄ± HazÄ±rla", "type": "main", "index": 0 } ] ] },
    "ğŸš« Silme Ä°ptal": { "main": [ [ { "node": "ğŸ”” Discord: Ä°ptal MesajÄ±", "type": "main", "index": 0 }, { "node": "ğŸ§± Log SatÄ±rÄ± HazÄ±rla", "type": "main", "index": 0 } ] ] },

    "ğŸ§­ Kategori EÅŸle": { "main": [ [ { "node": "ğŸ§  OpenAI: BBCode Ä°Ã§erik", "type": "main", "index": 0 } ] ] },
    "ğŸ§  OpenAI: BBCode Ä°Ã§erik": { "main": [ [ { "node": "âœï¸ LM Studio: Ä°mla DÃ¼zelt", "type": "main", "index": 0 } ] ] },
    "âœï¸ LM Studio: Ä°mla DÃ¼zelt": { "main": [ [ { "node": "ğŸ§µ XenForo: Konu OluÅŸtur", "type": "main", "index": 0 } ] ] },
    "ğŸ§µ XenForo: Konu OluÅŸtur": { "main": [ [ { "node": "ğŸ”” Discord: Yeni Konu", "type": "main", "index": 0 }, { "node": "ğŸ§± Log SatÄ±rÄ± HazÄ±rla", "type": "main", "index": 0 } ] ] },

    "ğŸ” YanÄ±tsÄ±z Konular (Saatlik)": { "main": [ [ { "node": "ğŸ¤– OpenAI: KÄ±sa YanÄ±t", "type": "main", "index": 0 } ] ] },
    "ğŸ¤– OpenAI: KÄ±sa YanÄ±t": { "main": [ [ { "node": "âœï¸ XenForo: YanÄ±t GÃ¶nder", "type": "main", "index": 0 } ] ] },
    "âœï¸ XenForo: YanÄ±t GÃ¶nder": { "main": [ [ { "node": "ğŸ§± Log SatÄ±rÄ± HazÄ±rla", "type": "main", "index": 0 } ] ] },

    "ğŸ§± Log SatÄ±rÄ± HazÄ±rla": { "main": [ [ { "node": "ğŸ“ Dosyaya Log Yaz", "type": "main", "index": 0 } ] ] },

    "ğŸ›¡ï¸ OpenAI Moderation": { "main": [ [ { "node": "ğŸš¦ Moderasyon KararÄ±", "type": "main", "index": 0 } ] ] },
    "ğŸš¦ Moderasyon KararÄ±": { "main": [ [ { "node": "ğŸ”” Discord: Moderasyon UyarÄ±sÄ±", "type": "main", "index": 0 } ] ] }
  },
  "pinData": {},
  "settings": { "timezone": "Europe/Istanbul" },
  "versionId": "1.0.0"
}

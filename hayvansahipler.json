{
  "name": "HayvanSahipleri - AI Forum Asistanı (Tek Workflow)",
  "nodes": [
    {
      "parameters": {},
      "id": "ManualTrigger",
      "name": "🟢 Manuel Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [80, 140]
    },
    {
      "parameters": {
        "rule": {
          "interval": [ { "field": "minutes", "value": 60 } ]
        }
      },
      "id": "Cron",
      "name": "⏰ Saatlik Cron",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1,
      "position": [80, 320],
      "notes": "Her saat başı otomatik tarama + oto-cevap / moderasyon akışını tetikler."
    },
    {
      "parameters": {
        "path": "forum-bot",
        "httpMethod": "POST",
        "responseMode": "lastNode",
        "options": { "responseData": "={{$json}}" }
      },
      "id": "Webhook",
      "name": "🌐 Webhook (Komut Girişi)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [80, 500],
      "notes": "Discord’dan veya dış sistemden komut göndermek istersen; body: {\"command\":\"getir son konular\"}"
    },
    {
      "parameters": {
        "functionCode": "const now = new Date().toISOString();\n// Kaynak: Manuel / Cron / Webhook\nlet command = '';\nif (items[0].json && items[0].json.command) {\n  command = String(items[0].json.command||'').trim();\n} else {\n  // Manuel/Cron tetiklerinde varsayılan işlem: saatlik görevler\n  command = 'cron_run';\n}\nreturn [{ now, command }];"
      },
      "id": "EntryNormalize",
      "name": "🔧 Giriş Normalize",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [320, 240]
    },
    {
      "parameters": {
        "functionCode": "// Komutları tanı: \n// yardim | getir son konular | getir son mesajlar | sil <link> | yeni konu <kategori>|<başlık>|<prompt> | cron_run\nconst input = String($json.command||'').toLowerCase();\nlet action = 'unknown';\nlet payload = {};\n\nif (input === 'yardim' || input === 'yardım') { action = 'help'; }\nelse if (input.startsWith('getir son konular')) { action = 'fetch_latest_threads'; }\nelse if (input.startsWith('getir son mesajlar')) { action = 'fetch_latest_posts'; }\nelse if (input.startsWith('sil ')) { action = 'delete_by_link'; payload.link = input.split(' ').slice(1).join(' ').trim(); }\nelse if (input.startsWith('yeni konu')) {\n  action = 'create_thread_ai';\n  const raw = input.replace(/^yeni konu\\s*/,'');\n  const parts = raw.split('|');\n  payload.kategori = (parts[0]||'').trim();\n  payload.baslik = (parts[1]||'').trim();\n  payload.prompt = (parts[2]||'').trim();\n}\nelse if (input === 'cron_run') { action = 'hourly_job'; }\n\nreturn [{ action, payload }];"
      },
      "id": "ParseCommand",
      "name": "🧠 Komut Yorumlayıcı",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [520, 240],
      "notes": "Komutların tamamını burada ayrıştırıyoruz."
    },
    {
      "parameters": {
        "rules": {
          "values": [
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "help" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "fetch_latest_threads" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "fetch_latest_posts" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "delete_by_link" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "create_thread_ai" },
            { "operation": "equal", "value1": "={{$json.action}}", "value2": "hourly_job" }
          ]
        }
      },
      "id": "Router",
      "name": "🚦 Komut Router",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 2,
      "position": [740, 240]
    },
    {
      "parameters": {
        "functionCode": "const help = `KOMUTLAR:\\n• yardim — kullanılabilir komutları listeler\\n• getir son konular — son açılan konuları getirir\\n• getir son mesajlar — forumdaki en yeni mesajları listeler\\n• sil <konu_veya_mesaj_linki> — silme onayı ister, onaylanırsa siler\\n• yeni konu <kategori>|<başlık>|<prompt> — OpenAI ile BBCode içerik üretip konu açar\\n\\nÖrnek: yeni konu kurallar-duyurular|Genel Forum Kuralları|Türkiyedeki büyük forumlardan esinlenerek kapsamlı bir kurallar metni hazırla.`;\nreturn [{ message: help }];"
      },
      "id": "HelpText",
      "name": "📜 Yardım Metni",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [980, 40]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [] },
        "jsonParameters": true,
        "headerParametersUi": {
          "parameter": [ { "name": "Content-Type", "value": "application/json" } ]
        },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordSend",
      "name": "🔔 Discord Bildirim",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1200, 40],
      "notes": "🔧 DISCORD_WEBHOOK_URL doldur."
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [ { "name": "order", "value": "post_date" }, { "name": "direction", "value": "desc" } ] },
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] }
      },
      "id": "GetLatestThreads",
      "name": "🧵 XenForo: Son Konular",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 140],
      "notes": "🔧 XF_API_KEY / BASE_API_URL"
    },
    {
      "parameters": {
        "functionCode": "const threads = items[0].json.threads || items[0].json._default || items[0].json || [];\nconst top = (Array.isArray(threads) ? threads : threads.data || [] ).slice(0,5);\nconst lines = top.map((t,i)=>`${i+1}. ${t.title} — ${t.view_url||t.links?.permalink||''}`);\nreturn [{ message: `Son Açılan Konular:\\n` + lines.join('\\n') }];"
      },
      "id": "FormatThreads",
      "name": "🧾 Listele: Konular",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1200, 140]
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [ { "name": "order", "value": "last_post_date" }, { "name": "direction", "value": "desc" } ] },
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] }
      },
      "id": "GetLatestPostsThreads",
      "name": "💬 XenForo: Son Mesajlar (Konu Bazlı)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 240],
      "notes": "🔧 XF_API_KEY / BASE_API_URL — son mesajlar için en güncel konular"
    },
    {
      "parameters": {
        "functionCode": "const threads = items[0].json.threads || items[0].json._default || items[0].json || [];\nconst top = (Array.isArray(threads) ? threads : threads.data || [] ).slice(0,5);\nconst lines = top.map((t,i)=>`${i+1}. ${t.title} — ${t.view_url||t.links?.permalink||''}`);\nreturn [{ message: `Son Mesajlar (güncel konular):\\n` + lines.join('\\n') }];"
      },
      "id": "FormatPostsList",
      "name": "🧾 Listele: Mesajlar",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1200, 240]
    },
    {
      "parameters": {
        "functionCode": "function extractIds(link){\n  // Örnek konu: https://.../konu/baslik.6/\n  // Örnek mesaj: https://.../mesaj/12345/\n  const out = { type: 'unknown', id: null };\n  try {\n    const u = new URL(link);\n    const p = u.pathname.toLowerCase();\n    const mThread = p.match(/\\.([0-9]+)\\/?$/);\n    if (p.includes('/konu/') && mThread) {\n      out.type = 'thread'; out.id = mThread[1]; return out;\n    }\n    const mPost = p.match(/\\/mesaj\\/(\\d+)/);\n    if (mPost){ out.type='post'; out.id=mPost[1]; return out;}\n  } catch(e){}\n  return out;\n}\nconst link = $json.payload?.link || '';\nconst info = extractIds(link);\nreturn [{ link, ...info }];"
      },
      "id": "ParseDeleteLink",
      "name": "🧩 Sil: Link/ID Ayrıştır",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [980, 340]
    },
    {
      "parameters": {
        "fromEmail": "hayvansahipleri@gmail.com",
        "toEmail": "digiuzman@gmail.com",
        "options": {
          "waitForResponse": {
            "responseFormat": "approval",
            "timeout": 3600
          }
        },
        "subject": "ForumBot - Silme Onayı",
        "text": "Silme talebi: {{$json.type}} ID {{$json.id}} ({{$json.link}})\\nOnaylıyorsanız Approve, iptal için Decline tıklayın."
      },
      "id": "EmailApprove",
      "name": "✉️ Email Send (Wait for Approval)",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 3,
      "position": [1200, 340],
      "notes": "🔧 SMTP/IMAP credentials seç; From/To kontrol et"
    },
    {
      "parameters": {
        "conditions": { "boolean": [{ "value1": "={{$json.approval}}"}] }
      },
      "id": "IfApproved",
      "name": "✅ Onaylandı mı?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [1420, 340]
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/{{$json.type === 'thread' ? 'threads' : 'posts'}}/{{$json.id}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] },
        "ignoreResponse": true
      },
      "id": "DeleteCall",
      "name": "🗑️ XenForo DELETE",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1620, 300],
      "notes": "🔧 XF_API_KEY / BASE_API_URL",
      "credentials": {},
      "webhookId": ""
    },
    {
      "parameters": {
        "functionCode": "return [{ message: `Silme tamamlandı: ${$json.type} ID ${$json.id}` }];"
      },
      "id": "DeleteOkMsg",
      "name": "📣 Silme Tamam Bildirimi",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1820, 300]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordAfterDelete",
      "name": "🔔 Discord: Silme Sonucu",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [2020, 300]
    },
    {
      "parameters": {
        "functionCode": "return [{ message: 'Silme iptal edildi.' }];"
      },
      "id": "DeleteCancelled",
      "name": "🚫 Silme İptal",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1620, 400]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordCancelMsg",
      "name": "🔔 Discord: İptal Mesajı",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1820, 400]
    },
    {
      "parameters": {
        "functionCode": "const mapCategory = (k)=>{\n  // Basit eşleme: isim → ID\n  const n = String(k||'').toLowerCase();\n  // Buraya ihtiyaca göre güncellenebilir sabit eşleme koyduk\n  if (n.includes('kurallar')) return 2; // örnek: Kurallar-Duyurular node_id:2 varsayım\n  return parseInt(n,10)||2; // sayıysa direkt, yoksa 2'yi kullan\n};\nreturn [{ node_id: mapCategory($json.payload?.kategori), title: $json.payload?.baslik, prompt: $json.payload?.prompt }];"
      },
      "id": "MapCategory",
      "name": "🧭 Kategori Eşle",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [980, 480],
      "notes": "Kategori adı→ID eşleme. Gerekirse burayı düzenleyebilirsin."
    },
    {
      "parameters": {
        "resource": "chat",
        "operation": "chatCompletion",
        "model": "gpt-4o",
        "messages": [
          { "role": "system", "content": "Türkçe yaz. Forum için BBCode ile güzel biçimlendirilmiş, başlıklar, listeler ve vurgular içeren bir içerik üret. Abartılı renklerden kaçın." },
          { "role": "user", "content": "Konu başlığı: {{$json.title}}\nİçerik yönergesi: {{$json.prompt}}\nLütfen [B], [U], [LIST], [*] gibi BBCode etiketlerini kullan." }
        ],
        "temperature": 0.6,
        "maxTokens": 1200
      },
      "id": "OpenAI_BBCode",
      "name": "🧠 OpenAI: BBCode İçerik",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 4,
      "position": [1200, 480],
      "notes": "OpenAI credential’ını bu node’a bağla."
    },
    {
      "parameters": {
        "url": "={{$json.LMSTUDIO_BASE || 'http://localhost:1234/v1'}}/chat/completions",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\n  \"model\": $json.LM_MODEL || \"fikri-8b\",\n  \"messages\": [\n    {\"role\":\"system\",\"content\":\"Türkçe imla ve yazım düzeltmeni istiyorum. Sadece düzeltilmiş metni döndür.\"},\n    {\"role\":\"user\",\"content\": $json[\"choices\"][0][\"message\"][\"content\"] }\n  ],\n  \"temperature\": 0.2\n}"
      },
      "id": "LM_Proofread",
      "name": "✍️ LM Studio: İmla Düzelt",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1420, 480],
      "notes": "LM Studio açıkken çalışır. 🔧 LMSTUDIO_BASE / LM_MODEL"
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] },
        "bodyParametersJson": "={\n  \"node_id\": {{$json.node_id}},\n  \"title\": \"{{$json.title}}\",\n  \"message\": {{$json.choices?.[0]?.message?.content || $json.choices?.[0]?.text || $json.result?.choices?.[0]?.message?.content || 'İçerik oluşturulamadı.'}}\n}"
      },
      "id": "CreateThread",
      "name": "🧵 XenForo: Konu Oluştur",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1640, 480],
      "notes": "🔧 XF_API_KEY / BASE_API_URL"
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": `🧵 Yeni konu açıldı: ${$json.thread?.view_url || 'URL için foruma bakın'}` }"
      },
      "id": "DiscordNewThread",
      "name": "🔔 Discord: Yeni Konu",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1860, 480]
    },
    {
      "parameters": {
        "functionCode": "const d = new Date();\nconst pad = n=>String(n).padStart(2,'0');\nconst yyyy = d.getFullYear(); const mm = pad(d.getMonth()+1); const dd = pad(d.getDate());\nconst HH = pad(d.getHours()); const MM = pad(d.getMinutes()); const SS = pad(d.getSeconds());\nconst stamp = `${yyyy}-${mm}-${dd} ${HH}:${MM}:${SS}`;\nconst line = `[${stamp}] ${$json.message || 'Olay'}\\n`;\nreturn [{ filename: `C:/Users/Admin/Desktop/Loglar/${yyyy}-${mm}-${dd}.txt`, data: line }];"
      },
      "id": "BuildLogLine",
      "name": "🧱 Log Satırı Hazırla",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [2080, 140]
    },
    {
      "parameters": {
        "fileName": "={{$json.filename}}",
        "data": "={{$json.data}}",
        "options": { "append": true }
      },
      "id": "WriteLog",
      "name": "📝 Dosyaya Log Yaz",
      "type": "n8n-nodes-base.writeBinaryFile",
      "typeVersion": 1,
      "position": [2280, 140],
      "notes": "Windows’ta belirtilen klasöre .txt olarak log yazar."
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/threads",
        "options": {},
        "authentication": "none",
        "queryParametersUi": { "parameter": [ { "name": "reply_count", "value": "0" }, { "name": "order", "value": "post_date" }, { "name": "direction", "value": "desc" } ] },
        "jsonParameters": false,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] }
      },
      "id": "FindUnanswered",
      "name": "🔎 Yanıtsız Konular (Saatlik)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 620],
      "notes": "Basit filtre: reply_count=0 (gerekiyorsa logic’te ek koşullar koyarız)"
    },
    {
      "parameters": {
        "resource": "chat",
        "operation": "chatCompletion",
        "model": "gpt-4o-mini",
        "messages": [
          { "role": "system", "content": "Türkçe, kısa ve yardımcı bir ilk cevap yaz. Çok kesin teşhis verme; gerekirse uzmana yönlendir. Gerekirse alıntılayacağını varsay." },
          { "role": "user", "content": "Soru: {{$json.title}} — İçerikten özet: {{$json.message || '...'}}" }
        ],
        "temperature": 0.5,
        "maxTokens": 500
      },
      "id": "OpenAI_Answer",
      "name": "🤖 OpenAI: Kısa Yanıt",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 4,
      "position": [1200, 620],
      "notes": "Saatlik job: yeni/yanıtsız sorulara tek seferlik kısa cevap"
    },
    {
      "parameters": {
        "url": "={{$json.BASE_API_URL || 'https://hayvansahipleri.com/api'}}/posts",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "XF-Api-Key", "value": "XF_API_KEY" } ] },
        "bodyParametersJson": "={\n  \"thread_id\": {{$json.thread_id || $json.threads?.[0]?.thread_id}},\n  \"message\": {{$json.choices?.[0]?.message?.content || 'Merhaba!'}}\n}"
      },
      "id": "PostAnswer",
      "name": "✍️ XenForo: Yanıt Gönder",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1420, 620],
      "notes": "Cevabı ilgili konuya gönderir."
    },
    {
      "parameters": {
        "url": "https://api.openai.com/v1/moderations",
        "options": {},
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={ \"model\": \"omni-moderation-latest\", \"input\": $json.message || $json.content || '' }"
      },
      "id": "ModerationCheck",
      "name": "🛡️ OpenAI Moderation",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [980, 740],
      "notes": "Zararlı içerik tespiti (metin) — flagged ise yayınlama/cevap iptal edilebilir."
    },
    {
      "parameters": {
        "functionCode": "const flagged = $json.results?.[0]?.flagged || false;\nreturn [{ flagged, message: flagged ? '⚠️ Moderasyon: İçerik flaglendi' : 'OK' }];"
      },
      "id": "ModerationRoute",
      "name": "🚦 Moderasyon Kararı",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1200, 740]
    },
    {
      "parameters": {
        "url": "={{$json.DISCORD_WEBHOOK_URL || 'https://DISCORD_WEBHOOK_URL'}}",
        "options": {},
        "authentication": "none",
        "jsonParameters": true,
        "headerParametersUi": { "parameter": [ { "name": "Content-Type", "value": "application/json" } ] },
        "bodyParametersJson": "={\"content\": $json.message }"
      },
      "id": "DiscordModerationAlert",
      "name": "🔔 Discord: Moderasyon Uyarısı",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [1420, 740]
    }
  ],
  "connections": {
    "🟢 Manuel Trigger": { "main": [ [ { "node": "🔧 Giriş Normalize", "type": "main", "index": 0 } ] ] },
    "⏰ Saatlik Cron": { "main": [ [ { "node": "🔧 Giriş Normalize", "type": "main", "index": 0 } ] ] },
    "🌐 Webhook (Komut Girişi)": { "main": [ [ { "node": "🔧 Giriş Normalize", "type": "main", "index": 0 } ] ] },
    "🔧 Giriş Normalize": { "main": [ [ { "node": "🧠 Komut Yorumlayıcı", "type": "main", "index": 0 } ] ] },
    "🧠 Komut Yorumlayıcı": { "main": [ [ { "node": "🚦 Komut Router", "type": "main", "index": 0 } ] ] },

    "🚦 Komut Router": {
      "main": [
        [ { "node": "📜 Yardım Metni", "type": "main", "index": 0 } ],
        [ { "node": "🧵 XenForo: Son Konular", "type": "main", "index": 0 } ],
        [ { "node": "💬 XenForo: Son Mesajlar (Konu Bazlı)", "type": "main", "index": 0 } ],
        [ { "node": "🧩 Sil: Link/ID Ayrıştır", "type": "main", "index": 0 } ],
        [ { "node": "🧭 Kategori Eşle", "type": "main", "index": 0 } ],
        [ { "node": "🔎 Yanıtsız Konular (Saatlik)", "type": "main", "index": 0 } ]
      ]
    },

    "📜 Yardım Metni": { "main": [ [ { "node": "🔔 Discord Bildirim", "type": "main", "index": 0 } ] ] },
    "🧵 XenForo: Son Konular": { "main": [ [ { "node": "🧾 Listele: Konular", "type": "main", "index": 0 } ] ] },
    "🧾 Listele: Konular": { "main": [ [ { "node": "🧱 Log Satırı Hazırla", "type": "main", "index": 0 } ] ] },
    "💬 XenForo: Son Mesajlar (Konu Bazlı)": { "main": [ [ { "node": "🧾 Listele: Mesajlar", "type": "main", "index": 0 } ] ] },
    "🧾 Listele: Mesajlar": { "main": [ [ { "node": "🔔 Discord Bildirim", "type": "main", "index": 0 }, { "node": "🧱 Log Satırı Hazırla", "type": "main", "index": 0 } ] ] },

    "🧩 Sil: Link/ID Ayrıştır": { "main": [ [ { "node": "✉️ Email Send (Wait for Approval)", "type": "main", "index": 0 } ] ] },
    "✉️ Email Send (Wait for Approval)": { "main": [ [ { "node": "✅ Onaylandı mı?", "type": "main", "index": 0 } ] ] },
    "✅ Onaylandı mı?": {
      "main": [
        [ { "node": "🗑️ XenForo DELETE", "type": "main", "index": 0 } ],
        [ { "node": "🚫 Silme İptal", "type": "main", "index": 0 } ]
      ]
    },
    "🗑️ XenForo DELETE": { "main": [ [ { "node": "📣 Silme Tamam Bildirimi", "type": "main", "index": 0 } ] ] },
    "📣 Silme Tamam Bildirimi": { "main": [ [ { "node": "🔔 Discord: Silme Sonucu", "type": "main", "index": 0 }, { "node": "🧱 Log Satırı Hazırla", "type": "main", "index": 0 } ] ] },
    "🚫 Silme İptal": { "main": [ [ { "node": "🔔 Discord: İptal Mesajı", "type": "main", "index": 0 }, { "node": "🧱 Log Satırı Hazırla", "type": "main", "index": 0 } ] ] },

    "🧭 Kategori Eşle": { "main": [ [ { "node": "🧠 OpenAI: BBCode İçerik", "type": "main", "index": 0 } ] ] },
    "🧠 OpenAI: BBCode İçerik": { "main": [ [ { "node": "✍️ LM Studio: İmla Düzelt", "type": "main", "index": 0 } ] ] },
    "✍️ LM Studio: İmla Düzelt": { "main": [ [ { "node": "🧵 XenForo: Konu Oluştur", "type": "main", "index": 0 } ] ] },
    "🧵 XenForo: Konu Oluştur": { "main": [ [ { "node": "🔔 Discord: Yeni Konu", "type": "main", "index": 0 }, { "node": "🧱 Log Satırı Hazırla", "type": "main", "index": 0 } ] ] },

    "🔎 Yanıtsız Konular (Saatlik)": { "main": [ [ { "node": "🤖 OpenAI: Kısa Yanıt", "type": "main", "index": 0 } ] ] },
    "🤖 OpenAI: Kısa Yanıt": { "main": [ [ { "node": "✍️ XenForo: Yanıt Gönder", "type": "main", "index": 0 } ] ] },
    "✍️ XenForo: Yanıt Gönder": { "main": [ [ { "node": "🧱 Log Satırı Hazırla", "type": "main", "index": 0 } ] ] },

    "🧱 Log Satırı Hazırla": { "main": [ [ { "node": "📝 Dosyaya Log Yaz", "type": "main", "index": 0 } ] ] },

    "🛡️ OpenAI Moderation": { "main": [ [ { "node": "🚦 Moderasyon Kararı", "type": "main", "index": 0 } ] ] },
    "🚦 Moderasyon Kararı": { "main": [ [ { "node": "🔔 Discord: Moderasyon Uyarısı", "type": "main", "index": 0 } ] ] }
  },
  "pinData": {},
  "settings": { "timezone": "Europe/Istanbul" },
  "versionId": "1.0.0"
}
